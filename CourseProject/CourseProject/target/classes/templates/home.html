<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:layout="http://www.thymeleaf.org"
      layout:decorate="~{layout}">
<!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<head>
    <title>Главная</title>
</head>
      <body>
      <div layout:fragment="content" class="container py-4">

          <!-- Заголовок и действия -->
          <div class="d-flex justify-content-between align-items-center mb-4">
              <h1 class="fw-bold mb-0">Добро пожаловать</h1>
              <div class="d-flex">
                  <a href="javascript:history.back()" class="btn btn-outline-secondary me-2">
                      <i class="fas fa-arrow-left me-1"></i> Назад
                  </a>
                  <form th:action="@{/logout}" method="post" class="d-inline">
                      <button type="submit" class="btn btn-outline-danger">
                          <i class="fas fa-sign-out-alt me-1"></i> Выйти
                      </button>
                  </form>
              </div>
          </div>

          <!-- Информация о пользователе -->
          <div class="alert alert-info shadow-sm">
              <p class="mb-1">Вы вошли как: <strong th:text="${username}"></strong></p>
              <p class="mb-0">Роли: <span th:text="${roles}"></span></p>
          </div>

          <!-- Основные разделы -->
          <div class="row g-4 mt-2">
              <!-- Клиенты -->
              <div class="col-md-4">
                  <div class="card h-100 shadow-sm border-0">
                      <div class="card-body d-flex flex-column">
                          <h5 class="card-title fw-semibold mb-3">Управление клиентами</h5>
                          <p class="card-text flex-grow-1">Добавление, редактирование и просмотр информации о клиентах.</p>
                          <a th:href="@{/clients/list}" class="btn btn-primary mt-auto">
                              <i class="fas fa-users me-1"></i> Перейти
                          </a>
                      </div>
                  </div>
              </div>

              <!-- Статусы -->
              <div class="col-md-4" sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_SUPERVISOR')">
                  <div class="card h-100 shadow-sm border-0">
                      <div class="card-body d-flex flex-column">
                          <h5 class="card-title fw-semibold mb-3">Управление статусами</h5>
                          <p class="card-text flex-grow-1">Последовательный перевод статусов клиентов по workflow.</p>
                          <a th:href="@{/status-management}" class="btn btn-warning text-dark mt-auto">
                              <i class="fas fa-sync-alt me-1"></i> Управление статусами
                          </a>
                      </div>
                  </div>
              </div>

              <!-- Пользователи -->
              <div class="col-md-4" sec:authorize="hasRole('ROLE_ADMIN')">
                  <div class="card h-100 shadow-sm border-0">
                      <div class="card-body d-flex flex-column">
                          <h5 class="card-title fw-semibold mb-3">Управление пользователями</h5>
                          <p class="card-text flex-grow-1">Управление учетными записями и правами доступа.</p>
                          <a th:href="@{/admin/users}" class="btn btn-danger mt-auto">
                              <i class="fas fa-user-shield me-1"></i> Админ-панель
                          </a>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Второй ряд -->
          <div class="row g-4 mt-3">
              <div class="col-md-4">
                  <div class="card h-100 shadow-sm border-0">
                      <div class="card-body d-flex flex-column">
                          <h5 class="card-title fw-semibold mb-3">О приложении</h5>
                          <p class="card-text flex-grow-1">Информация о возможностях и функционале приложения.</p>
                          <a th:href="@{/about}" class="btn btn-primary mt-auto">
                              <i class="fas fa-info-circle me-1"></i> Подробнее
                          </a>
                      </div>
                  </div>
              </div>
          </div>

      </div>
      </body>
</html>